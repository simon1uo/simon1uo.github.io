name: deploy

# åœ¨mainåˆ†æ”¯å‘ç”Ÿpushäº‹ä»¶æ—¶è§¦å‘ã€‚
on:
  push:
    branches:
      - main

env: # è®¾ç½®ç¯å¢ƒå˜é‡
  TZ: Asia/Shanghai # æ—¶åŒºï¼ˆè®¾ç½®æ—¶åŒºå¯ä½¿é¡µé¢ä¸­çš„`æœ€è¿‘æ›´æ–°æ—¶é—´`ä½¿ç”¨æ—¶åŒºæ—¶é—´ï¼‰

jobs:
  build:
    runs-on: ubuntu-latest # è¿è¡Œåœ¨è™šæ‹Ÿæœºç¯å¢ƒubuntu-latest

    steps:
      # æ£€å‡º
      - name: Checkout
        uses: actions/checkout@v2

        # å®‰è£… node
      - name: Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: "16.x"
          cache: "pnpm"

        # æ„å»º
      - name: Build
        run: |
          pnpm install
          pnpm run build

      # å‘å¸ƒåˆ° gh-page åˆ†æ”¯
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: ./docs/.vitepress/dist
          ssh-key: ${{ secrets.ACTIONS_DEPLOY_KEY }}
